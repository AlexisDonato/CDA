{% extends 'base.html.twig' %}

{% block title %}Catégories
{% endblock %}

{% block body %}
	<div class="container">
		{% if categories|length > 0 %}

			<h1 class="text-info mb-3 mt-3">Catégories :</h1>

			{% set col = 1 %}
			{% for category in categories %}
				{% if (col == 1)%}
					<div class="row">
				{% endif %}
					<div class="col-4">
						{% if category.parentCategory %}
							<div class="dropdown">
								<button data-toggle="dropdown" id="category" class="btn btn-warning darker border border-secondary d-flex mt-1 mb-1 position-relative align-items-center">
									<i class="fa-solid fa-guitar text-secondary"></i>
									<h2>
										<a class="text-decoration-none text-light ml-3 mr-3" href="{{ path('app_catalogue', {'category': category.parentCategory.id}) }}">
											{{ category.parentCategory }}
										</a><h2 class="badge rounded-pill border border-light bg-secondary text-white ml-1">{{ category.parentCategory.products|length }}</h2>
									</h2>
								</button>
								<div class="dropdown-menu ddmenu border border-dark">
									<nav aria-label="breadcrumb">
										<ol class="breadcrumb">
											<a class="text-info dropdown-item breadcrumb-item" href="{{ path('app_catalogue', {'category': category.parentCategory.id}) }}">
												<div class="d-flex justify-content-start">{{category.parentCategory}}<h2 class="badge rounded-pill border border-light bg-secondary text-white ml-3">{{ category.parentCategory.products|length }}</h2>
												</div>
											</a>
											<a class="text-info dropdown-item breadcrumb-item" href="{{ path('app_catalogue', {'category': category.id}) }}">
												<div class="d-flex justify-content-start">{{ category.name }}<h2 class="badge rounded-pill border border-light bg-secondary text-white ml-3">{{ category.products|length }}</h2>
												</div>
											</a>
										</ol>
									</nav>
								</div>
							</div>
						{% else %}
							<button id="category" class="btn btn-dark darker border border-secondary d-flex mt-1 mb-1 position-relative align-items-center">
								<i class="fa-solid fa-guitar text-secondary"></i>
								<h2>
									<a class="text-decoration-none text-light ml-3 mr-3" href="{{ path('app_catalogue', {'category': category.id}) }}">
										{{ category.name }}
									</a>
								</h2>
								<h2 class="badge rounded-pill border border-light bg-secondary text-white ml-1">{{ category.products|length }}</h2>
							</button>
						{# </div> #}
						{% endif %}
					</div>

				{% if (col == 3) %}
				</div>
				{% set col = 1 %}
				{% else %}
				{% set col = col + 1 %}
				{% endif %}
				{% endfor %}

	</div>
		{% else %}
		<h1 class="mt-3 mb-5">Aucune catégorie trouvée!</h1>
		{% endif %}
	</div>
{% endblock %}
