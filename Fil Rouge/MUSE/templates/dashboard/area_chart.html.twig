{% block head %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawAreaChart);

        {% set tot = 0 %}
        {% for cart in carts %}
          {% if cart.validated %}
            {% set tot = tot + cart.total %}
                      {% endif %}
        {% endfor %}

      function drawAreaChart() {
        var area_data = google.visualization.arrayToDataTable([
          ['Ann√©e', 'Ventes', 'Clients'],
          {% for cart in carts %}
          {% if cart.validated %}
          ['{{cart.orderDate|date('Y')}}', {{tot}}, {{users|length}}],
           {% endif %}
          {% endfor %}
          ['2023',  0,      0]
        ]);

        var area_options = {
          title: 'Evolution des commandes',
          hAxis: {title: 'Year',  titleTextStyle: {color: '#333'}},
          vAxis: {minValue: 0},
        };

        var area_chart = new google.visualization.AreaChart(document.getElementById('area_chart_div'));

        area_chart.draw(area_data, area_options);
      }
    </script>
{% endblock %}