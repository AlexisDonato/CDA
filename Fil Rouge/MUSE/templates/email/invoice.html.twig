<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://localhost:8000/css/style.css">
		<title>Document</title>
	</head>
	<body>
		<div class="container text-light">
			<div class="row">
				<div class="col-sm-12">

					<h1 class="text-center">Votre facture</h1>
						<div class="float-left">
						{{ app.user.userName }}, {{ app.user.userLastName }}<br>
						Email : {{ app.user.email }}
						N° de téléphone : {{app.user.phoneNumber}}
						</div>
					<p>Votre commande n°<b>{{ order.clientOrderId }}</b>
						a bien été validée en date du
						{{ order.orderDate|format_datetime('short', 'none', locale='fr') }}
					. Voici le récapitulatif :</p>


				<table class="table table-dark darker">
					<thead>
						<tr class="text-primary">
							<th>Produit</th>
							<th>Prix</th>
							<th>Promotion</th>
							{% for detail in details|slice(0, 1) %}
								{% if detail.cart.additionalDiscountRate != 0 %}
									<th class="text-success">Remise</th>
								{% endif %}
							{% endfor %}
							<th>TVA</th>
							<th>Quantité</th>
							<th>Sous-total</th>
						</tr>
					</thead>
					<tbody>
						{% for detail in details %}
							<tr>
								<td>
									<a class="text-decoration-none" href="{{ path('app_product_show', {'id': detail.product.id}) }}">
										<p class="productHl">{{detail.product.name}}</p>
									</a>
								</td>
								<td>{{detail.product.price}}</td>
								{% if detail.product.discountRate != 0 %}
									<td class="text text-warning">
										<h4 class="text-warning roboto">-{{ detail.product.discountRate * 100 }}
											%</h4>
									{% else %}
										<td>-
										{% endif %}
									</td>
									{% if detail.cart.additionalDiscountRate != 0 %}
										<td class="text-success">-{{detail.cart.additionalDiscountRate * 100}}%</td>
									{% endif %}
									<td>{{ app.user.vat * 100}}%</td>
									<td>{{detail.quantity}}
										{% if detail.product.quantity == 0 %}
											({{detail.product.quantity}}
											left in stock)
										{% endif %}
									</td>
									<td class="roboto h5{% if detail.product.discountRate != 0 %} text-warning{% endif %}">{{ ((detail.product.price * detail.quantity) * (1 - ( detail.product.discountRate + detail.cart.additionalDiscountRate)) * (1 +  app.user.vat ))|number_format(2, '.', '') }}€
									</td>
								</tr>
							</tr>
					</tbody>

					<tfoot>
						<tr>
							<td colspan="3" class="text-right roboto h5">
								<b>Total :</b>
							</td>
							<td class="roboto h4">{{ detail.cart.total }}
								€
							</td>
							{% if detail.product.discountRate != 0 %}
								<td colspan="3"></td>
							{% else %}
								<td colspan="2"></td>
							{% endif %}
						</tr>
					</tfoot>
				</table>
				{% endfor %}

				<img style="width: 200px; border-radius: 10px;" src="http://localhost:8000/img/Muse_rect_no.jpg">

			</div>
		</div>
	</body>
</html></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script></body></html>
